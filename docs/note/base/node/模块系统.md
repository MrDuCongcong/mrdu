# 模块系统

node.js最初仅实现了CommonJS规范的模块系统，但是目前已经支持了ECMAScript的模块标准。

在Node.js中，每个文件都被视为一个单独模块。在下面情况下，Node.js会把模块视为一个Common.js模块。

- 带有 .cjs 扩展名的文件.
- 具有 .js 扩展名的文件，当最近的父 package.json 文件包含值为“commonjs”的顶级字段“type”时。
- 扩展名不是 .mjs、.cjs、.json、.node 或 .js 的文件。

## 模块加载机制

https://mp.weixin.qq.com/s/v-5Cg5XKisQeitJDjOR4AA

https://medium.com/@alexishevia/the-magic-behind-npm-link-d94dcb3a81af#id_token=eyJhbGciOiJSUzI1NiIsImtpZCI6ImFjZGEzNjBmYjM2Y2QxNWZmODNhZjgzZTE3M2Y0N2ZmYzM2ZDExMWMiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20iLCJuYmYiOjE2ODA3NDIyMzUsImF1ZCI6IjIxNjI5NjAzNTgzNC1rMWs2cWUwNjBzMnRwMmEyamFtNGxqZGNtczAwc3R0Zy5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbSIsInN1YiI6IjEwMDQ4NTI1NTczMTE2MjE2MTc3MiIsImVtYWlsIjoiZHVjb25nY29uZzE5OTZAb3V0bG9vay5jb20iLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiYXpwIjoiMjE2Mjk2MDM1ODM0LWsxazZxZTA2MHMydHAyYTJqYW00bGpkY21zMDBzdHRnLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIiwibmFtZSI6IkNvbmdjb25nIER1IiwicGljdHVyZSI6Imh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS9hL0FHTm15eGJSYjdmN0djX1dLVlZQbXd1a1RXTjFMT2ZGVWRqdVZnYXdlMmI1PXM5Ni1jIiwiZ2l2ZW5fbmFtZSI6IkNvbmdjb25nIiwiZmFtaWx5X25hbWUiOiJEdSIsImlhdCI6MTY4MDc0MjUzNSwiZXhwIjoxNjgwNzQ2MTM1LCJqdGkiOiIyM2ZiMjRjNzMwZDdhNGQ3ZTM4YWViZGZmYmFhMDUyNGEzYWIxYzdlIn0.h30vApfcuRkCJqlRnUBRzc5q5SGHMNn2xHrj7-CqY7dDlN3zWtn_4AGU1UT3a464DuxSHYShqhun8OV8u-sL-h-k4vnyKqmSf42JBRJcSQ_IqoSXkWY2XqzvITRS7Pniwa-X3b-RI5VazhUxCp7N0tZyRDkFmxNla5P-BPg6mybIwr9RtmMPkvEx5hFbfwRw_z2X5Acxt-wDPdknoY-VM_CdsxhhLBjhZ3AClsUg5X_PYajuhmv1cX_Rlc5uApkV58ntknXHyamAcPJri6uYKa-LOSiuuVOGHQQExg5BzdWwkOEn5le72H08mw735uNsKPgSfUXYsqGZPQKDTljiAw

## 模块作用域

