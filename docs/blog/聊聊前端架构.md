# 浅谈前端架构

## 时代背景下的前端

我喜欢从历史的维度出发，然后将视角延伸到当前时代去思考问题。事实上，大多数的新的事物的出现，都是基于历史经验的总结。

抛开1990年Tim Berners Lee发明了世界上第一个网页浏览器WorldWideWeb不谈，自1995 年，Brendan Eich为Netscpe开发出第一版的JavaScript后，一直到现在，前端经历了两次新生。第一次是2005年出现的ajax，还有一次是2009年Node.js的诞生。之后，前端工程师的工作重点逐渐偏向复杂的交互逻辑和架构，技能发展方向也出现了改变，出现了以“泛前端”和“大前端”代表的两种技术发展趋势。

大前端指的是“服务端 + 前端”的模式。大前端开发模式指的是前端工程师负责一部分web服务端的工作，甚至是将服务端、数据库工作一并包揽的“全栈开发”。主流的js服务端开发框架有：express、koa和nest.js。node服务端优势：

1. nodejs底层异步io，性能比较好。
2. 编写起来不用担心线程的问题。
3. 开发速度高，弱类型语言比较灵活，不像强类型一样需要各种转换，代码量少。
4. 单页应用ssr比较方便，上下文比较相同。
5. 前端转nodejs相对来说对语法天然熟练。

泛前端则是“web前端 + App端”。即前端开发人员使用跨平台的HTML + CSS + JavaScript等技术开发桌面端、移动端等应用。主流的泛前端技术包含开发桌面应用的electron、React Native，包括微信小程序、支付宝小程序等技术。甚至是flutter等新的移动端技术。

## 前端架构

首先明确一下业务、架构、工程化三者之间的关系：业务作为核心出发点，架构聚焦于代码，工程化聚焦于流程。

像上面所说的， 随着前端技术的发展，出现了React、Vue等，使得前端脱离的JSP、Velocity等服务端模板引擎，而独立发展， 前端能够承载更复杂的交互和业务逻辑。 

### 什么是前端架构

什么是架构，在《大型网站技术架构——核心原理与案例分析》一书中是这么描述的：架构是一种高层次的规划，决定产品的走向和最终蓝图。在前端架构中则是从代码层面考虑源码组织规范、组件化/模块化、数据管理、性能优化。

### 什么是前端工程化

"软件工程"最初是为了解决软件危机，包含下面几个问题：

- 代码不规范，维护成本高。
- 开发过程混乱，且难以管理
- 性能不理想，功能不稳定。
- 降低开发成本，减少冗余工作。

代码和流程和软件工程的核心关注点。从代码的角度考虑，工程的目标是保证软件的高可用性、可扩展性、可伸缩行、性能和安全。在架构之外，工程从更宏观的角度完善开发和维护流程的管控，强调项目迭代的规范性、有序性、可控性和高效性。

前端工程体系是一种服务，以项目迭代过程中的前端开发为主要服务对象，涉及开 发、构建、部署等环节。对语言内在功能特性的补充，或在对其外在组织能力的补充。这些种种补充，尽是 在工程体系的“工具”这一隅上做的功夫。

<center>前端工程化 = 前端技术架构 + 前端工程服务体系</center>



### 架构师的职责

前端架构师简单概况为两方面：

- 根据业务特征设计合理的前端技术架构。
- 根据架构特征搭建合理的前端工程服务体系。

在热力学里边有个概念“熵”，它用来衡量系统的混乱和无序程度。热力学第二定律描述：无外界干预的孤立系统会自动朝着热力学平衡——最大熵状态——演化，即变的越来越混乱。同样的，软件开发过程中也是随着需求的不断增加，整个项目会朝着无序化演进，冗余度越来越高，最终变的难以维护，变成一坨“屎山”。架构师便是通过及时，有效的干预，即在开发过程中不断进行微小的重构，以保持项目的有序。

### 架构师在项目中的角色

架构师在开发团队中的角色有些特殊，除了架构设计、软件开发等技术工作外，可能还会承担一部分规划产品路线、安排人员职责分工、指导工程师工作、过程风险评估等其他工作，因为这些工作通常需要对产品技术架构、功能模块划分、技术风险都熟悉的架构师直接参与或负责。在开发过程中，还需要完成项目组内外的沟通协调工作。

#### 共同参与产品

所谓“一群优秀的人做一件共同热爱的事，那他们一定会成功”。好的项目管理不仅仅是制定计划、组织资源、跟踪和修正项目进度，更重要的是让项目组中的每一个成员都能理解产品，理解目标本身。架构师和项目组成员应该有一个共同描述的蓝图。

- 产品要做什么，不做什么，要达到什么样的业务目标。
- 产品能为用户创造什么样的价值，实现什么样的市场目标，产品最终长什么样子等。

#### 共同参与架构

记得测试的同事有一次找我要一份功能清单，来明确相关功能的开发人员，我表示我没有，测试同事表示你就知道自己做了什么，那你开发个卵啊？

项目的架构不仅仅是由架构师负责，并不是说架构师自己完成架构设计，并由团队成员严格遵守架构决策。而是由团队成员共同维护，让项目参与者对架构充分讨论，共同在开发过程中承担责任。







 



